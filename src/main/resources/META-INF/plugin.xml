<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.semgrep.idea</id>
    <name>Semgrep</name>
    <vendor>Semgrep</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.ultimate</depends>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <platform.lsp.serverSupportProvider implementation="com.semgrep.idea.lsp.SemgrepLspServerSupportProvider"/>
        <applicationService
                serviceImplementation="com.semgrep.idea.lsp.settings.AppSettingsState"/>
        <applicationConfigurable
                parentId="tools"
                instance="com.semgrep.idea.lsp.settings.AppSettingsConfigurable"
                id="com.semgrep.idea.lsp.settings.AppSettingsConfigurable"
                displayName="Semgrep"/>

    </extensions>

    <actions>
        <group
                id="com.semgrep.idea.lsp.actions.SemgrepGroup"
                text="Semgrep"
                popup="true"
                >
            <add-to-group
                    group-id="ToolsMenu"
                    />
            <action
                    class="com.semgrep.idea.lsp.actions.LoginAction"
                    id="com.semgrep.idea.lsp.actions.LoginAction"
                    text="Sign In to Semgrep"
                    description="Sign in to Semgrep Code for CI rules">
            </action>
            <action
                    class="com.semgrep.idea.lsp.actions.LogoutAction"
                    id="com.semgrep.idea.lsp.actions.LogoutAction"
                    text="Sign Out of Semgrep"
                    description="Sign out of Semgrep Code">
            </action>
            <separator/>
            <action
                    class="com.semgrep.idea.lsp.actions.RefreshRulesAction"
                    id="com.semgrep.idea.lsp.actions.RefreshRulesAction"
                    text="Update Semgrep Rules"
                    description="Update Semgrep rules to newest versions">
            </action>
            <action
                class="com.semgrep.idea.lsp.actions.ScanWorkspaceAction"
                id="com.semgrep.idea.lsp.actions.ScanWorkspaceAction"
                text="Scan Workspace with Semgrep"
                description="Scan changed files in project with Semgrep">
            </action>
            <action
                class="com.semgrep.idea.lsp.actions.ScanWorkspaceFullAction"
                id="com.semgrep.idea.lsp.actions.ScanWorkspaceFullAction"
                text="Scan Workspace with Semgrep (Full)"
                description="Scan all files in project with Semgrep"
                >
            </action>

        </group>
    </actions>

</idea-plugin>
